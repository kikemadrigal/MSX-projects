Sjasm Z80 Assembler v0.42c - www.xl2s.tk             [2026.02.21 - 09:31:15]

src-pt3/musicint.asm
Errors: 7

       1   00:0000                              output "musicint.bin"
       2   00:BF00                      ;music.bin necestia 800 bytes para alojarse en la RAM, en basic tenemos hasta la direccion &hf380-800= eb00
       3   00:BF00  FE                      db   #fe               ; ID archivo binario, siempre hay que poner el mismo 0FEh
       4   00:BF01  00 BF                   dw   INICIO            ; dirección de inicio
       5   00:BF03  40 BF                   dw   FINAL - 1         ; dirección final
       6   00:BF05  00 BF                   dw   INICIO            ; dircción del programa de ejecución (para cuando pongas r en bload"nombre_programa", r)
       7   00:BF07                      
       8   00:BF07                          org #bf00 ; org se utiliza para decirle al z80 en que posición de memoria empieza nuestro programa (es la 33280 en decimal), en hezadecimal sería #8200
       9   00:BF00                          ; Las variables del pt3_player está definidas en el archivo PT3_player.asm en la dirección #f000
      10   00:BF00  (00:FD9A)           HKEYI equ #FD9A
      11   00:BF00  (00:FD9F)           HTIMI equ #FD9F ;Vblank
      12   00:BF00  (00:0032)           MAX_CONTADOR equ 50
      13   00:BF00                      INICIO:
      14   00:BF00                      inicilizar_tracker:
      15   00:BF00                      
      16   00:BF00                      
      17   00:BF00                          ;Deactivamos las interrupciones
      18   00:BF00  F3                      di	
      19   00:BF01  21 DE BE            	ld		hl,SONG-99		; hl vale la direccion donde se encuentra la cancion - 99
src-pt3/musicint.asm(20) : Label not found: PT3_INIT
      20   00:BF04  CD 00 00            	call	PT3_INIT			; Inicia el reproductor de PT3
      21   00:BF07                          
      22   00:BF07                          
      23   00:BF07                          ;Salvamos la rutina ISR(Interrupt service routine) si hubiese alguna.Son 5 bytes
      24   00:BF07  21 9F FD                ld hl,HTIMI
      25   00:BF0A  11 02 F2                ld de,rutina_previa
      26   00:BF0D  01 05 00                ld bc,5
      27   00:BF10  ED B0                   ldir
      28   00:BF12                      
      29   00:BF12                      
      30   00:BF12                          ;instalamos nuestra rutina
      31   00:BF12  3E C3                   ld a,#c3
      32   00:BF14  21 1F BF                ld hl, reproducir_bloque_musica
      33   00:BF17  32 9F FD                ld (HTIMI),a
      34   00:BF1A  22 A0 FD                ld (HTIMI+1), hl
      35   00:BF1D                          ;Activamos las interrupciones
      36   00:BF1D  FB                  	ei 
      37   00:BF1E                          ;Volvemos al basic
      38   00:BF1E  C9                      ret
      39   00:BF1F                      
      40   00:BF1F                      reproducir_bloque_musica:
      41   00:BF1F                          ;------------------Reproducir Bloque de múscia--------
      42   00:BF1F                          ;halt						;sincronizacion
      43   00:BF1F  F3                  	di
src-pt3/musicint.asm(44) : Label not found: PT3_ROUT
      44   00:BF20  CD 00 00            	call	PT3_ROUT			;Borrar el valor anterior
src-pt3/musicint.asm(45) : Label not found: PT3_PLAY
      45   00:BF23  CD 00 00            	call	PT3_PLAY			;Reproduce el siguiente trozo de canción
      46   00:BF26  FB                      ei
      47   00:BF27                          ;--------------Fin de reproducir bloque de música-----
      48   00:BF27                          ;lanzamos la rutina que había
      49   00:BF27  C3 02 F2                jp rutina_previa
      50   00:BF2A                          ;Volvemos al basic
      51   00:BF2A  C9                      ret
      52   00:BF2B                      para_cancion:
      53   00:BF2B                          ;volvemos a poner los 5 bytes que tenía
      54   00:BF2B  21 02 F2                ld hl,rutina_previa
      55   00:BF2E  11 9F FD                ld de,HTIMI
      56   00:BF31  01 05 00                ld bc,5
      57   00:BF34  ED B0                   ldir
      58   00:BF36                      
src-pt3/musicint.asm(59) : Label not found: PT3_MUTE
      59   00:BF36  CD 00 00                call PT3_MUTE
      60   00:BF39  C9                      ret
      61   00:BF3A                      evitar_repeticion_cancion:
      62   00:BF3A  3A F8 F7                ld a, (#f7f8)
src-pt3/musicint.asm(63) : Label not found: PT3_SETUP
      63   00:BF3D  32 00 00                ld (PT3_SETUP),a
      64   00:BF40  C9                      ret
      65   00:BF41                      tracker:
src-pt3/musicint.asm(66) : Error opening file: .\src\PT3_player.asm
      66   00:BF41                      	include	"./src/PT3_player.asm"					;replayer de PT3
      67   00:BF41                      SONG:
src-pt3/musicint.asm(68) : Error opening file: .\src\song.pt3
      68   00:BF41  (0000)              	incbin "./src/song.pt3"			;musica de ejemplo
      69   00:BF41                      
      70   00:BF41                      
      71   00:BF41                      ;definición de variables
      72   00:BF41                      ;contador: db 0
      73   00:BF41                                                  ;bytes
      74   00:BF41                      ;contador_vblanks equ #f200    ;1
      75   00:BF41                      ;contador_de_segundos equ #f201;1
      76   00:BF41  (00:F202)           rutina_previa equ #f202       ;5
      77   00:BF41                      FINAL:
      78   00:BF41                      
      79   00:BF41                      
      80   00:BF41                      
      81   00:BF41                      
      82   00:BF41                      
      83   00:BF41                      
      84   00:BF41                      
      85   00:BF41                      
      86   00:BF41                      
      87   00:BF41                      
      88   00:BF41                      

    LABELS
-------------------------------------------------
00:0000FD9A X HKEYI
00:0000FD9F   HTIMI
00:00000032 X MAX_CONTADOR
00:0000BF00   INICIO
00:0000BF00 X inicilizar_tracker
00:0000BF1F   reproducir_bloque_musica
00:0000BF2B X para_cancion
00:0000BF3A X evitar_repeticion_cancion
00:0000BF41 X tracker
00:0000BF41   SONG
00:0000F202   rutina_previa
00:0000BF41   FINAL


 Output: src-pt3/musicint.out
-------------------------------------------------

 Page: 00
  Org: 0000BF00  Size: *  Used: 00000000

    No output

 Output: musicint.bin
-------------------------------------------------

 Page: 00
  Org: 0000BF00  Size: *  Used: 00000048

   Address   Length Align   Label
   0000BF00      72         INICIO
